
Доработки:

возможность задавать зону вручную (а не автоматом по мячу определять).
На рендже нет явной отметки. Положение мяча немного меняется.
Зону задавать не прямоугольником (2 точки) а возможность под углом или более сложной формы (как старая зона)

адаптивный порог при определении текущего состояния. Если видим что мяч, то пробегаем по порогам в поисках
наиболее оптимального (освещение может меняться с момента определения start_zone) и сохраняем его (заменяем старый).
Т.о. подстраиваемся под (плавное) изменение освещенности.

Сделать два режима - для свинга и для пата.
На пате короче замах - отличаются шаблон для поиска и длительность показа клипа.

возможность запуска из командной строки:
+ имена файлов - в параметрах (с умолчанием, если их нет - чтобы из ИДЕ запускать удобнее)
- синхронизация между монитором и наблюдателем через pipeline а не watchdog. Удобнее запускать - не надо в фон отправлять
- вынести на кнопки или в аргументе настройки, которые делаю в коде: rotate, flip. Возможно: ball size.

monitor:
- использовать для просмотра конкретного файла (или нескокольких, папки и т.д.).

Будущее развитие:
-----------------
1) проигрыватель:
  - покадрово назад (сейас только вперед по пробелу)
  - переход к предидущему/следующему свинг-клипу
  - рисование линий, квадратов для отслеживания движений (головы и пр).
  - удаление текущего клипа (с диска и из списка)
2) pose estimation:
   - положение головы
   - ось спины
3) использование без ноутбука - только с телефона
4) использование с ноутом с Виндовс а не Линукс.
5) для патинга - возможность указать лунку (кликом) и отслеживать статистику: попал/промахнулся, слева/справа.

Разное
------
Плейер передает в фрейм-процессор словарь с текущим состоянием кнопок. Процессор выбирает сам, если ему что-то нужно.
Там уже "отрисовка зоны". Добавить - отображать старт-зону.

в swing cutter переставить классы по приоритетам (обьявить вниз Colours, History)
отработать конфигурацию логов через yaml файл.

замещение фрейм-процессора (есть/нет) через наследование классов, а не вот это все...

варианты улучшения расознавания:
1) вырезаем по цвету ударный мат. он однородный (относительно) по цвету

Done:
=====

выделить запись в файл в отдельный класс в util. Использовать и в player и в cutter.
вынести frame_processor в класс (импортировать из разных файлов можно с одним и тем же именем). Учесть что его может не быть совсем (базовый класс - все None).
- status_history - не строкой а двусторонней очередью. Или просто обрезать старое. Когда долго стоит без ударов - история растет сильно (больше любого максимума)

Для упрощения отладки неправильных нарезок отображать в клипе (по кнопке): состояние зоны в каждом кадре (буквы ЕМВ),
 рег.выражение на основании которого принято решение что это свинг. Это позволит контролировать
сразу в процессе тренировки без лазанья по логам.

find best thresh:
when found level_results[] and len(level_results)>5:
    don't take second best (as it is now), instead:
    for thresh in [best_thresh - 20%, best_thresh]:
        find minimal non-ball area on no-morphed image
        take minimal thresh if several min(non-ball area)

изменение скорости проигывания (+,-)

Отказался:
Выбирать в качестве точки поиска зоны не просто клик, а самую яркую точку в небольшой окрестности клика (чтобы
было не критично попадание именно в светлую зону мяча).
- для плохого освещения упростить задание положения мяча. Сейчас надо попаст именно в белую (яркую) часть полумесяца.
возможно надо добавить convex и возможность кликнуть внутрь полумесяца, альтернатива - давать увеличенный вид зоны для кликов

в preprocess_image open,close применяеются до прменения порога. на не очень контрастных кадрах это плохо.
переделать, чтобы после применения порога (get_best_thresh, get_current_state). к этому привязан BLUR_LEVEL - будет
работать по другому.

Окна плейера свингов и обсервера сразу выводить в правильные места и, возможно, требовать что-бы все время были наверху
(или сразу наверху, потом - как хотят). Чтобы избежать начального растягивания окон каждый раз после запуска.

Окно с текущим состоянием старт-зоны (пороговое) накладывать прямо на окно текущего вывода, чтобы не создавать
два окна и не возить их по экрану. Показывать/скрывать окно старт-зоны по кнопке.

Reconnect при потере потока от камеры (ждем, пробуем, выходим по клавише)
